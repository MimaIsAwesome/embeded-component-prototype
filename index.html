<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Login Popup</title>
</head>
<body>
<div>Scalesoft</div>
<p>Pokračovat jako <strong>Ján Omáčka</strong>?</p>
<button id="loginBtn">Pokračovat</button>

<script>
    document.getElementById("loginBtn").addEventListener("click", () => {
        const userId = "Ján_Omáčka";  // your simulated user

        // Optional: cookie ONLY for popup domain (SameSite=Lax)
        document.cookie =
            `popupAuth=${encodeURIComponent(userId)}; path=/; SameSite=Lax;`;

        // 1. Notify opener (FE)
        if (window.opener) {
            window.opener.postMessage({
                type: "LOGIN_SUCCESS",
                user: userId
            }, "*");
        }

        // 2. Close popup
        window.close();
    });
</script>

</body>
</html>
